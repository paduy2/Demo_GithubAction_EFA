name: Deploy to test Windows Server

run-name: ðŸŒ¿ Development ðŸš€ FE ðŸ’¥ ${{ github.actor }}  

on:
 push:
    branches:
      - 'main'

jobs:
  build-and-deploy-development:
    runs-on: development  # Specify a self-hosted runner on Windows Server
    environment: stg
    if: ${{ github.ref == 'refs/heads/main' }}
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4


      - name: Build code
        run: |
          echo "TESTING"
          # New-Item -Path "D:\" -Name "TEST_Website" -ItemType Directory
          # C:\windows\system32\inetsrv\appcmd.exe start sites "efadrin-biz"
          Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))

      - name: Print branch name
        run: |
          echo "Branch name: ${{ github.ref }}"

    # build-and-deploy-development-fe:
    # runs-on: development  # Specify a self-hosted runner on Windows Server
    # environment: stg
    # # if: ${{ github.ref == 'refs/heads/FE_test_ticket' }}
    # steps:
    #   - name: Check out repository code
    #     uses: actions/checkout@v4

    #   - name: Build code
    #     run: |
    #       echo "TESTING"
    #       # New-Item -Path "D:\" -Name "TEST_Website" -ItemType Directory

    #   - name: Print branch name
    #     run: |
    #       echo "Branch name: ${{ github.ref }}"

  # build-and-deploy-production:
  #     runs-on: production  # Specify a self-hosted runner on Windows Server
  #     environment: stg
  #     steps:
  #       - name: Check out repository code
  #         uses: actions/checkout@v4

  #       - name: Build code
  #         run: |
  #           echo "TESTING"
  #           New-Item -Path "D:\" -Name "TEST_Website" -ItemType Directory

  #       - name: Print branch name
  #         run: |
  #           echo "Branch name: ${{ env.GITHUB_REF_NAME }}"


  

